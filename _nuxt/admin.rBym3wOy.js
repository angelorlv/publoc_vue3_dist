import f from"./progressspinner.esm.-2pCrWRU.js";import{u as p}from"./useNotifToast.tXbUjrmB.js";import{s as m,G as _,r as d,H as h,h as v,K as y,u as k,W as S,c as g,d as w,o as b}from"./entry.sPeV4ugY.js";import{u as B}from"./global.JfHO2k1E.js";import"./basecomponent.esm.MS1ObfXz.js";const N={key:1,class:"flex w-screen h-screen justify-center items-center"},A={__name:"admin",setup(R){const r=B(),{profil:s,connected:a,showAdminSidebar:n}=m(r),{setErrorServer:c,setNotifToast:T}=p(),t=_(),o=d(!0),u=h();async function l(){try{const e=await $fetch("/api/a/check_connect");e.status?(s.value=e.user,a.value=!0,s.value.pr_type!="a"&&t.push("/"),o.value=!1):t.push("/login")}catch(e){console.error(e),c()}}return v(()=>u.fullPath,()=>{n.value=!1}),y(()=>{l()}),(e,x)=>{const i=f;return k(o)?(b(),g("div",N,[w(i)])):S(e.$slots,"default",{key:0,class:""})}}};export{A as default};
