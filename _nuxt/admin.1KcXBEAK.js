import f from"./progressspinner.esm.ToFABQef.js";import{u as p}from"./useNotifToast.KtHWH4XV.js";import{s as m,A as _,r as d,B as h,h as v,D as y,u as k,V as S,c as g,d as w,o as B}from"./entry.gBsFnzxz.js";import{u as b}from"./global.s3RjI9vb.js";import"./basecomponent.esm.vCjcc5sE.js";const N={key:1,class:"flex w-screen h-screen justify-center items-center"},j={__name:"admin",setup(R){const r=b(),{profil:s,connected:a,showAdminSidebar:n}=m(r),{setErrorServer:c,setNotifToast:T}=p(),t=_(),o=d(!0),u=h();async function l(){try{const e=await $fetch("/api/a/check_connect");e.status?(s.value=e.user,a.value=!0,s.value.pr_type!="a"&&t.push("/"),o.value=!1):t.push("/login")}catch(e){console.error(e),c()}}return v(()=>u.fullPath,()=>{n.value=!1}),y(()=>{l()}),(e,x)=>{const i=f;return k(o)?(B(),g("div",N,[w(i)])):S(e.$slots,"default",{key:0,class:""})}}};export{j as default};
