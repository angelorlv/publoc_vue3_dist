import N from"./message.esm.7Ie1MxVq.js";import b from"./inputtext.esm.fYdK0exk.js";import V from"./button.esm.jT06-WGs.js";import{u as w}from"./useNotifToast.KtHWH4XV.js";import{s as k,A as T,r as c,c as B,a as t,d as n,w as m,a9 as C,u as e,aa as E,o as d,y as I,e as O,b as S,x as $}from"./entry.gBsFnzxz.js";import{u as M}from"./global.s3RjI9vb.js";import"./index.esm.Z-9qAGnU.js";import"./baseicon.esm.PLl1dN0r.js";import"./basecomponent.esm.vCjcc5sE.js";import"./index.esm.ixeDcPvO.js";import"./index.esm.fglehKuv.js";import"./index.esm.QbOAC03e.js";import"./badge.esm.oU5j7EWK.js";import"./index.esm.YLkPFSz7.js";const U={class:"w-screen h-screen text-gray-700 flex justify-center items-center"},j=t("div",{class:"mb-2 text-2xl flex"},[t("span",{class:"underline-text tracking-[.25em]"}," CONNEXION ")],-1),G={class:"flex flex-col mb-2"},R=t("span",{class:""}," Identifiant ",-1),X={class:"flex flex-col mb-5"},A=t("span",{class:""}," Mot de passe ",-1),D={class:""},ae={__name:"login",setup(q){const f=M(),{profil:p,connected:_}=k(f),{setErrorServer:v,setNotifToast:z}=w(),x=T(),s=c({is:!1,content:"",severity:"error"}),i=c(!1),r=c({id:"",pass:""});async function g(){i.value=!0;try{const o=await $fetch("/api/p/auth",{method:"post",body:r.value});o.status?(p.value=o.u,_.value=!0,p.value.pr_type=="a"&&x.push("/admin")):(s.value.is=!0,s.value.content=o.message)}catch(o){console.log(o),v()}i.value=!1}return(o,a)=>{const h=N,u=b,y=V;return d(),B("div",U,[t("form",{onSubmit:E(g,["prevent"]),class:"w-[400px] flex flex-col",action:"/api/a/auth",method:"post"},[j,n(C,{name:"p-message",tag:"div"},{default:m(()=>[e(s).is?(d(),I(h,{key:0,onClose:a[0]||(a[0]=l=>e(s).is=!1),severity:e(s).severity},{default:m(()=>[O(S(e(s).content),1)]),_:1},8,["severity"])):$("",!0)]),_:1}),t("div",G,[R,n(u,{modelValue:e(r).id,"onUpdate:modelValue":a[1]||(a[1]=l=>e(r).id=l),placeholder:"john"},null,8,["modelValue"])]),t("div",X,[A,n(u,{modelValue:e(r).pass,"onUpdate:modelValue":a[2]||(a[2]=l=>e(r).pass=l),placeholder:"*******",type:"password"},null,8,["modelValue"])]),t("div",D,[n(y,{type:"submit",loading:e(i),class:"w-full text-gray-100 tracking-[.25em]",label:"CONNEXION"},null,8,["loading"])])],32)])}}};export{ae as default};
