import V from"./inputtext.esm.f54f7e7c.js";import{s as w}from"./dropdown.esm.097ea475.js";import{u as S}from"./useNotifToast.35453648.js";import{u as $}from"./global.f57b83eb.js";import{s as I,r as d,g as R,n as T,c as B,a as e,b as n,u as o,q as C,v as N,o as U,p as A,e as D}from"./entry.d008ba6d.js";import{_ as F}from"./_plugin-vue_export-helper.c27b6911.js";import"./basecomponent.esm.8e553a4b.js";import"./index.esm.9aad9a8c.js";import"./baseicon.esm.ae8d05ed.js";import"./index.esm.51105741.js";import"./index.esm.3a2b13d8.js";import"./overlayeventbus.esm.e8b3193e.js";import"./portal.esm.94d64a71.js";import"./virtualscroller.esm.2cfaa20d.js";const t=c=>(A("data-v-2a27b4c9"),c=c(),D(),c),k={class:"mx-5 my-10"},E={class:"flex flex-col border"},P=t(()=>e("div",{class:"border-b border-dashed p-2"},[e("span",{class:"font-bold text-sm uppercase"}," Panneau ")],-1)),j={class:"flex p-2 border-b"},q={class:"flex flex-col mr-5"},z=t(()=>e("span",{class:"text-sm"}," Référence ",-1)),G={class:"flex flex-col mr-5"},H=t(()=>e("span",{class:"text-sm"}," Surface ",-1)),M={class:"flex flex-col"},J=t(()=>e("span",{class:"text-sm"}," Visuel Actuel ",-1)),K={class:"flex p-2 border-b"},L={class:"flex flex-col mr-5"},O=t(()=>e("span",{class:"text-sm"}," Catégorie ",-1)),Q={class:"flex flex-col mr-5"},W=t(()=>e("span",{class:"text-sm"}," Format ",-1)),X={class:"flex flex-col"},Y=t(()=>e("span",{class:"text-sm"}," Type de support ",-1)),Z={__name:"add",props:["heightHeader","prefix_api","heightContainer"],setup(c){const h=$(),{panel_impression_type:b}=I(h),u=c,{setErrorServer:x,setNotifToast:v}=S(),m=d([]),p=d([]),a=d(-1),l=d({pan_support:"aucun",pan_format:-1});async function y(){try{const s=await $fetch(`${u.prefix_api}/a/ad/panel/add/data-utils`);s.status?(m.value=s.categories,p.value=s.formats,a.value=m.value[0].cat_id,l.value.pan_format=p.value[0].cat_id):v({detail:s.message,summary:"Données utiles pour ajout de panneau",severity:"error"})}catch{x()}}R(a,()=>{g()});async function g(){try{const s=await $fetch(`${u.prefix_api}/a/cat/formats/${a.value}`);s.status?(p.value=s.formats,l.value.pan_format=p.value[0].cat_id):v({detail:s.message,summary:"Récupération des formats de panneau",severity:"error"})}catch{x()}}return T(()=>{y()}),(s,r)=>{const _=V,f=w;return U(),B("div",{class:"flex flex-col h-full overflow-auto",style:N({height:`${u.heightContainer}px`})},[e("div",k,[e("div",E,[P,e("div",j,[e("div",q,[z,n(_,{placeholder:"Référence regisseur",class:"p-2 text-sm w-[200px]"})]),e("div",G,[H,n(_,{placeholder:"Surface du panneau",class:"p-2 text-sm w-[200px]"})]),e("div",M,[J,n(_,{placeholder:"Visuel Actuel",class:"p-2 text-sm w-[300px]"})])]),e("div",K,[e("div",L,[O,n(f,{modelValue:o(a),"onUpdate:modelValue":r[0]||(r[0]=i=>C(a)?a.value=i:null),options:o(m),class:"dropdown-md","option-label":"cat_label","option-value":"cat_id"},null,8,["modelValue","options"])]),e("div",Q,[W,n(f,{modelValue:o(l).pan_format,"onUpdate:modelValue":r[1]||(r[1]=i=>o(l).pan_format=i),options:o(p),class:"dropdown-md","option-label":"cat_label","option-value":"cat_id"},null,8,["modelValue","options"])]),e("div",X,[Y,n(f,{modelValue:o(l).pan_support,"onUpdate:modelValue":r[2]||(r[2]=i=>o(l).pan_support=i),options:o(b),class:"dropdown-md","option-label":"label","option-value":"code"},null,8,["modelValue","options"])])])])])],4)}}},_e=F(Z,[["__scopeId","data-v-2a27b4c9"]]);export{_e as default};
