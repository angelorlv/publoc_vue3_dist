import N from"./message.esm.r3GLQbup.js";import b from"./inputtext.esm.WOKXVyy7.js";import V from"./button.esm.yOU7mbBk.js";import{u as w}from"./useNotifToast.tXbUjrmB.js";import{s as k,G as T,r as c,c as B,a as t,d as n,w as m,aa as C,u as e,ab as E,o as d,y as I,e as O,b as S,x as $}from"./entry.sPeV4ugY.js";import{u as G}from"./global.JfHO2k1E.js";import"./index.esm.y5vHEM8V.js";import"./baseicon.esm.7QbvKBS0.js";import"./basecomponent.esm.MS1ObfXz.js";import"./index.esm.GnFVT_JI.js";import"./index.esm.Rcv_evjR.js";import"./index.esm.V-NatXPO.js";import"./badge.esm.4D_NwcJ1.js";import"./index.esm.8qzpe_dP.js";const M={class:"w-screen h-screen text-gray-700 flex justify-center items-center"},U=t("div",{class:"mb-2 text-2xl flex"},[t("span",{class:"underline-text tracking-[.25em]"}," CONNEXION ")],-1),j={class:"flex flex-col mb-2"},R=t("span",{class:""}," Identifiant ",-1),X={class:"flex flex-col mb-5"},D=t("span",{class:""}," Mot de passe ",-1),q={class:""},ae={__name:"login",setup(z){const f=G(),{profil:p,connected:_}=k(f),{setErrorServer:v,setNotifToast:A}=w(),x=T(),s=c({is:!1,content:"",severity:"error"}),i=c(!1),r=c({id:"",pass:""});async function g(){i.value=!0;try{const o=await $fetch("/api/p/auth",{method:"post",body:r.value});o.status?(p.value=o.u,_.value=!0,p.value.pr_type=="a"&&x.push("/admin")):(s.value.is=!0,s.value.content=o.message)}catch(o){console.log(o),v()}i.value=!1}return(o,a)=>{const h=N,u=b,y=V;return d(),B("div",M,[t("form",{onSubmit:E(g,["prevent"]),class:"w-[400px] flex flex-col",action:"/api/a/auth",method:"post"},[U,n(C,{name:"p-message",tag:"div"},{default:m(()=>[e(s).is?(d(),I(h,{key:0,onClose:a[0]||(a[0]=l=>e(s).is=!1),severity:e(s).severity},{default:m(()=>[O(S(e(s).content),1)]),_:1},8,["severity"])):$("",!0)]),_:1}),t("div",j,[R,n(u,{modelValue:e(r).id,"onUpdate:modelValue":a[1]||(a[1]=l=>e(r).id=l),placeholder:"john"},null,8,["modelValue"])]),t("div",X,[D,n(u,{modelValue:e(r).pass,"onUpdate:modelValue":a[2]||(a[2]=l=>e(r).pass=l),placeholder:"*******",type:"password"},null,8,["modelValue"])]),t("div",q,[n(y,{type:"submit",loading:e(i),class:"w-full text-gray-100 tracking-[.25em]",label:"CONNEXION"},null,8,["loading"])])],32)])}}};export{ae as default};
