import N from"./message.esm.f93bfb34.js";import b from"./inputtext.esm.f54f7e7c.js";import V from"./button.esm.c233e1d0.js";import{u as w}from"./useNotifToast.35453648.js";import{s as k,G as T,r as c,c as B,a as t,b as n,w as m,X as C,u as e,Y as S,o as d,z as E,d as I,t as O,x as $}from"./entry.d008ba6d.js";import{u as G}from"./global.f57b83eb.js";import"./index.esm.35f1050a.js";import"./baseicon.esm.ae8d05ed.js";import"./basecomponent.esm.8e553a4b.js";import"./index.esm.0ce334a2.js";import"./index.esm.3a2b13d8.js";import"./index.esm.107430f4.js";import"./badge.esm.09832455.js";import"./index.esm.51105741.js";const M={class:"w-screen h-screen text-gray-700 flex justify-center items-center"},U=["onSubmit"],X=t("div",{class:"mb-2 text-2xl flex"},[t("span",{class:"underline-text tracking-[.25em]"}," CONNEXION ")],-1),j={class:"flex flex-col mb-2"},R=t("span",{class:""}," Identifiant ",-1),z={class:"flex flex-col mb-5"},D=t("span",{class:""}," Mot de passe ",-1),Y={class:""},re={__name:"login",setup(q){const f=G(),{profil:p,connected:_}=k(f),{setErrorServer:v,setNotifToast:A}=w(),x=T(),s=c({is:!1,content:"",severity:"error"}),i=c(!1),r=c({id:"",pass:""});async function h(){i.value=!0;try{const o=await $fetch("/api/p/auth",{method:"post",body:r.value});o.status?(p.value=o.u,_.value=!0,p.value.pr_type=="a"&&x.push("/admin")):(s.value.is=!0,s.value.content=o.message)}catch(o){console.log(o),v()}i.value=!1}return(o,a)=>{const g=N,u=b,y=V;return d(),B("div",M,[t("form",{onSubmit:S(h,["prevent"]),class:"w-[400px] flex flex-col",action:"/api/a/auth",method:"post"},[X,n(C,{name:"p-message",tag:"div"},{default:m(()=>[e(s).is?(d(),E(g,{key:0,onClose:a[0]||(a[0]=l=>e(s).is=!1),severity:e(s).severity},{default:m(()=>[I(O(e(s).content),1)]),_:1},8,["severity"])):$("",!0)]),_:1}),t("div",j,[R,n(u,{modelValue:e(r).id,"onUpdate:modelValue":a[1]||(a[1]=l=>e(r).id=l),placeholder:"john"},null,8,["modelValue"])]),t("div",z,[D,n(u,{modelValue:e(r).pass,"onUpdate:modelValue":a[2]||(a[2]=l=>e(r).pass=l),placeholder:"*******",type:"password"},null,8,["modelValue"])]),t("div",Y,[n(y,{type:"submit",loading:e(i),class:"w-full text-gray-100 tracking-[.25em]",label:"CONNEXION"},null,8,["loading"])])],40,U)])}}};export{re as default};
