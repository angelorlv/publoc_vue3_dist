import L from"./button.esm.yOU7mbBk.js";import{w as S,F as V,v as Z,s as A,u as J,i as T,_ as W}from"./geosearch.JHL0My60.js";import{_ as G}from"./_plugin-vue_export-helper.x3n3nnut.js";import{r as a,q as K,o as u,c as g,a as c,d as i,w as d,u as o,y as O,x as Y,F as P,D as Q,b as y,p as R,f as U}from"./entry.sPeV4ugY.js";const b=l=>(R("data-v-2d4bbfbe"),l=l(),U(),l),H={class:"w-screen h-screen bg-white bg-opacity-70 fixed top-0 left-0 flex justify-center items-center",style:{"z-index":"1010"}},X={class:"rounded-lg flex bg-gray-100",style:{height:"80%",width:"80%"}},ee=b(()=>c("div",{class:"p-0 m-0 relative flex justify-center items-end w-12 h-12",style:{}},[c("span",{class:"material-icons text-black-600",style:{"font-size":"42px"}}," place ")],-1)),te=b(()=>c("div",{class:"p-0 m-0 relative flex justify-center items-end w-12 h-12",style:{}},[c("span",{class:"material-icons text-blue-600",style:{"font-size":"42px"}}," place ")],-1)),ae={class:"flex flex-col p-5",style:{"min-width":"300px"}},le={class:"text-sm font-bold"},oe={class:"text-xl"},se={class:"py-2 flex justify-end w-full p-button-sm"},ne={__name:"addByMap",props:["data_carte","old_lieu"],emits:["close","validate"],setup(l,{emit:h}){const p=h;a({});const k=a([-18.929670491513264,47.52685546875001]),w=a("pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA");a({});const C=a(null),e=a({lat:0,lng:0,region:"",ville:"",quartier:"",pays:""}),I=a(["lat","lng","region","ville","quartier","pays"]),M=a("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),z=a('&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors'),f=a([24,48]),j=a(16);async function v(r){e.value.region="",e.value.pays="",e.value.ville="",e.value.quartier="";try{let s=(await $fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${r.lng},${r.lat}.json?access_token=${w.value}`)).features;for(let n=1;n<s.length;n++)switch(s[n].id.split(".")[0]){case"locality":e.value.quartier=s[n].text;break;case"place":e.value.ville=s[n].text;break;case"region":e.value.region=s[n].text;break;case"country":e.value.pays=s[n].text;break;default:break}}catch(t){console.log(t)}}function q(){p("validate",e.value),p("close")}function N(r){let t=r.target._latlng;v(t),e.value.lat=t.lat,e.value.lng=t.lng}function B(r){let t=r.latlng;v(t),e.value.lat=t.lat,e.value.lng=t.lng}function D(){new S({provider:new V,showMarker:!1,style:"bar",notFoundMessage:"Désolé, l'Adresse n'a pas pus être trouvé",inputLabel:"sdfqsd"})}return K(()=>{D()}),(r,t)=>{const s=L,n=Z,_=A,x=J,$=T,E=W;return u(),g("div",H,[c("div",X,[i(s,{onClick:t[0]||(t[0]=m=>p("close")),icon:"pi pi-times",severity:"danger",rounded:"","aria-label":"Cancel",class:"fixed top-2 right-2 shadow-lg"}),i(E,null,{default:d(()=>[i($,{ref_key:"map",ref:C,onClick:B,style:{"border-radius":"10px"},zoom:o(j),center:l.old_lieu?[l.old_lieu.lat,l.old_lieu.lng]:o(k)},{default:d(()=>[i(n,{url:o(M),attribution:o(z),options:{maxZoom:22,maxNativeZoom:18}},null,8,["url","attribution"]),l.old_lieu?(u(),O(x,{key:0,"lat-lng":[l.old_lieu.lat,l.old_lieu.lng],draggable:!1},{default:d(()=>[i(_,{"icon-anchor":o(f),"class-name":"someExtraClass"},{default:d(()=>[ee]),_:1},8,["icon-anchor"])]),_:1},8,["lat-lng"])):Y("",!0),i(x,{"lat-lng":[o(e).lat,o(e).lng],draggable:!0,onDragend:N},{default:d(()=>[i(_,{"icon-anchor":o(f),"class-name":"someExtraClass"},{default:d(()=>[te]),_:1},8,["icon-anchor"])]),_:1},8,["lat-lng"])]),_:1},8,["zoom","center"])]),_:1}),c("div",ae,[(u(!0),g(P,null,Q(o(I),(m,F)=>(u(),g("div",{class:"flex flex-col border-b",key:F},[c("span",le,y(m),1),c("span",oe,y(o(e)[m]||"-"),1)]))),128)),c("div",se,[i(s,{label:"Valider",class:"p-1",onClick:q})])])])])}}},ue=G(ne,[["__scopeId","data-v-2d4bbfbe"]]);export{ue as _};
