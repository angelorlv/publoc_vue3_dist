import W from"./button.esm.jT06-WGs.js";import{s as fe}from"./dropdown.esm.5Vq7RTSK.js";import me from"./checkbox.esm.BBZqcwSj.js";import he from"./menu.esm.ziqZq8LH.js";import be from"./inputtext.esm.fYdK0exk.js";import xe from"./image.esm.b2P5-UvD.js";import{w as ve,F as ye,v as ge,s as ke,u as we,i as $e,_ as Ce}from"./geosearch.x7_z9nkZ.js";import{_ as ee}from"./_plugin-vue_export-helper.x3n3nnut.js";import{r as n,q as se,o,c as i,a as e,d as p,w as h,u as s,y as U,x as R,p as te,f as oe,A as Ve,B as Se,C as Re,D as De,b as c,e as J,F as j,E as P,z as E,h as q,G as X,v as Ie,H as Ae,I as Me,J as Q}from"./entry.gBsFnzxz.js";import{u as le}from"./useNotifToast.KtHWH4XV.js";import"./badge.esm.oU5j7EWK.js";import"./basecomponent.esm.vCjcc5sE.js";import"./index.esm.YLkPFSz7.js";import"./baseicon.esm.PLl1dN0r.js";import"./index.esm.k9AeUCDd.js";import"./index.esm.fglehKuv.js";import"./overlayeventbus.esm.XiOFkiaj.js";import"./portal.esm.NvhUfLY5.js";import"./virtualscroller.esm.XhfGNEYM.js";import"./index.esm.Z-9qAGnU.js";import"./index.esm.Tix4DWaY.js";const je=u=>(te("data-v-8b06f3ae"),u=u(),oe(),u),Pe={class:"w-screen h-screen bg-white bg-opacity-70 fixed top-0 left-0 flex justify-center items-center",style:{"z-index":"1010"}},Ee={class:"rounded-lg flex bg-gray-100",style:{height:"80%",width:"80%"}},Le=je(()=>e("div",{class:"p-0 m-0 relative flex justify-center items-end w-12 h-12",style:{}},[e("span",{class:"material-icons text-blue-600",style:{"font-size":"42px"}}," place ")],-1)),ze={__name:"viewPanOnMap",props:["pan"],emits:["close"],setup(u,{emit:I}){const L=I;n({});const A=n([-18.929670491513264,47.52685546875001]);n("pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA"),n({});const b=n(null);n(["lat","lng","region","ville","quartier","pays"]);const d=n("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),F=n('&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors'),t=n([24,48]),C=n(16);function B(){new ve({provider:new ye,showMarker:!1,style:"bar",notFoundMessage:"DÃ©solÃ©, l'Adresse n'a pas pus Ãªtre trouvÃ©",inputLabel:"Rechercher un endroit"})}return se(()=>{B()}),(m,g)=>{const z=W,f=ge,x=ke,k=we,w=$e,V=Ce;return o(),i("div",Pe,[e("div",Ee,[p(z,{onClick:g[0]||(g[0]=_=>L("close")),icon:"pi pi-times",severity:"danger",rounded:"","aria-label":"Cancel",class:"fixed top-2 right-2 shadow-lg"}),p(V,null,{default:h(()=>[p(w,{ref_key:"map",ref:b,style:{"border-radius":"10px"},zoom:s(C),center:u.pan?[u.pan.lieu_lat,u.pan.lieu_lng]:s(A)},{default:h(()=>[p(f,{url:s(d),attribution:s(F),options:{maxZoom:22,maxNativeZoom:18}},null,8,["url","attribution"]),u.pan?(o(),U(k,{key:0,"lat-lng":[u.pan.lieu_lat,u.pan.lieu_lng],draggable:!1},{default:h(()=>[p(x,{"icon-anchor":s(t),"class-name":"someExtraClass"},{default:h(()=>[Le]),_:1},8,["icon-anchor"])]),_:1},8,["lat-lng"])):R("",!0)]),_:1},8,["zoom","center"])]),_:1})])])}}},Ne=ee(ze,[["__scopeId","data-v-8b06f3ae"]]),Te={class:"bg-white fixed w-screen h-screen top-0 left-0 z-[900] overflow-auto"},Oe={key:0,class:"md:w-[900px] w-[100%] mx-auto flex flex-col"},Ue={class:"flex border p-2 my-5"},Fe={class:"flex flex-col"},Be=e("span",{class:"text-sm font-bold"}," RÃ©f. Publoc ",-1),qe={class:""},Je={class:"flex flex-col ml-5"},Ze=e("span",{class:"text-sm font-bold"}," RÃ©f. RÃ©gissseur ",-1),Ge={class:""},He={class:"flex flex-col ml-5"},Qe=e("span",{class:"text-sm font-bold"}," RÃ©gissseur ",-1),We={class:""},Ke={class:"flex border mb-5 p-2"},Ye={class:"flex flex-col"},Xe=e("span",{class:"text-sm font-bold"}," CatÃ©gorie ",-1),es={class:""},ss={class:"flex flex-col ml-5"},ts=e("span",{class:"text-sm font-bold"}," Format ",-1),os={class:""},ls={class:"flex border mb-5"},ns={key:0,class:"w-full"},as=e("div",{class:"p-1 border-b border-dashed"},[e("span",{class:"text-sm font-bold"}," Ce panneau est disponible ")],-1),is=[as],cs={key:1,class:"w-full border border-red-400"},rs=e("div",{class:"p-1 border-b border-dashed"},[e("span",{class:"text-sm font-bold"}," Ce panneau est en location ")],-1),ds={class:"flex flex-col p-2 w-full"},ps={class:"flex flex-col"},_s=e("span",{class:"text-sm font-bold"}," Date de dÃ©but de la location ",-1),us={class:""},fs={class:"flex flex-col"},ms=e("span",{class:"text-sm font-bold"}," Nombre de Mois ",-1),hs={class:""},bs={class:"flex flex-col"},xs=e("span",{class:"text-sm font-bold"}," Date Fin prÃ©vu de la location ",-1),vs={class:""},ys={class:"flex flex-col border p-2 bg-red-200/5"},gs={class:"flex flex-col"},ks=e("span",{class:"text-sm font-bold"}," Annonceur ",-1),ws={class:""},$s={class:"text-xs text-gray-500"},Cs={key:0,class:"flex flex-col mt-2"},Vs=e("div",{class:"border-b border-dashed"},[e("span",{class:"text-sm font-bold uppercase"}," Sous-location ")],-1),Ss={class:"flex flex-col"},Rs={class:"flex flex-col"},Ds=e("span",{class:"text-sm font-bold"}," Annonceur ",-1),Is={class:""},As={class:"flex flex-col"},Ms=e("span",{class:"text-sm font-bold"}," Date de dÃ©but ",-1),js={class:""},Ps={class:"flex flex-col"},Es=e("span",{class:"text-sm font-bold"}," Nombre de mois ",-1),Ls={class:""},zs={class:"flex flex-col"},Ns=e("span",{class:"text-sm font-bold"}," Date prÃ©vu de la fin de la sous-location ",-1),Ts={class:""},Os={key:2,class:"w-full"},Us=e("div",{class:"p-1 border-b border-dashed"},[e("span",{class:"text-sm font-bold"}," Ce panneau n'est pas disponible ")],-1),Fs=[Us],Bs={class:"flex flex-col border mb-5"},qs={class:"border-b border-dashed p-1 flex items-center"},Js=e("span",{class:"font-bold text-sm"}," Emplacement ",-1),Zs=e("span",{class:"flex-grow"},null,-1),Gs={class:"flex flex-col p-2"},Hs={class:"flex flex-col mb-2"},Qs=e("span",{class:"text-sm font-bold"}," Lieu dit ",-1),Ws={class:""},Ks={class:"flex flex-col mb-2"},Ys=e("span",{class:"text-sm font-bold"}," Ville ",-1),Xs={class:""},et={class:"flex flex-col mb-2"},st=e("span",{class:"text-sm font-bold"}," RÃ©gion ",-1),tt={class:""},ot={class:"flex flex-col mb-2"},lt=e("span",{class:"text-sm font-bold"}," Quartier ",-1),nt={class:""},at={class:"flex flex-col border mb-5"},it=e("div",{class:"border-b border-dashed p-1"},[e("span",{class:"font-bold text-sm"}," Images en mode Disponible ")],-1),ct={key:0,class:"flex flex-wrap p-2"},rt=e("i",{class:"pi pi-search"},null,-1),dt=["src"],pt=["src","onClick"],_t={key:1,class:"flex justify-center items-center p-5"},ut=e("span",{class:"font-bold text-gray-500"}," Aucune photo en mode dispo ",-1),ft=[ut],mt={class:"flex flex-col border mb-5"},ht=e("div",{class:"border-b border-dashed p-1"},[e("span",{class:"font-bold text-sm"}," Images en mode pose ")],-1),bt={key:0,class:"flex flex-wrap p-2"},xt=e("i",{class:"pi pi-search"},null,-1),vt=["src"],yt=["src","onClick"],gt={key:1,class:"flex justify-center items-center p-5"},kt=e("span",{class:"font-bold text-gray-500"}," Aucune photo en mode pose ",-1),wt=[kt],$t={class:"flex flex-col border mb-5"},Ct=e("div",{class:"border-b border-dashed p-1"},[e("span",{class:"font-bold text-sm"}," Images Solarpro ")],-1),Vt={key:0,class:"flex flex-wrap p-2"},St=e("i",{class:"pi pi-search"},null,-1),Rt=["src"],Dt=["src","onClick"],It={key:1,class:"flex justify-center items-center p-5"},At=e("span",{class:"font-bold text-gray-500"}," Aucune photo Solarpro ",-1),Mt=[At],jt={class:"p-2 flex mb-5 border-t"},Pt=e("span",{class:"flex-grow"},null,-1),Et={__name:"AdminViewPanel",props:["visible","pan_id","prefix_api"],emits:["close","refresh"],setup(u,{emit:I}){const{setErrorServer:L,setNotifToast:A}=le();Ve(),Se();const b=u,d=I,F=Re(),t=n({}),C=n(!1),B=f=>{F.require({target:f.currentTarget,message:"Voulez-vous vraiment supprimer ce panneau ?",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm p-1",acceptClass:"p-button-sm p-1",rejectLabel:"Annuler",acceptLabel:"Oui",accept:()=>{m()},reject:()=>{}})};async function m(){try{const f=await $fetch(`${b.prefix_api}/a/ad/panel/${b.pan_id}`,{method:"delete"});f.status?(A({summary:"Suppression d'un panneau",detail:"Le panneau est placÃ© dans la corbeille ðŸ§º"}),d("refresh")):A({detail:f.message,severity:"error",summary:"Suppression d'un panneau"})}catch{L()}}function g(){window.open(`/admin/panels/modif?id=${b.pan_id}`,"_blank")}async function z(){try{const f=await $fetch(`${b.prefix_api}/a/ad/panel/${b.pan_id}`,{method:"get"});f.status?(t.value=f.pan_infos,t.value.loc_infos&&(t.value.loc_infos.date_fin=new Date(t.value.loc_infos.pan_loc_date_debut).addMonths(t.value.loc_infos.pan_loc_month)),t.value.sous_loc_infos&&(t.value.sous_loc_infos.date_fin=new Date(t.value.sous_loc_infos.saloc_date_debut).addMonths(t.value.sous_loc_infos.saloc_month))):A({summary:"RÃ©cupÃ©ration des donnÃ©es",detail:f.message,severity:"error"})}catch(f){console.error(f),L()}}return De(()=>{z()}),(f,x)=>{const k=W,w=xe,V=Ne;return o(),i("div",Te,[p(k,{onClick:x[0]||(x[0]=_=>d("close")),icon:"pi pi-times",severity:"danger",rounded:"","aria-label":"Cancel",class:"fixed top-2 right-2 shadow-lg"}),s(t).pan?(o(),i("div",Oe,[e("div",Ue,[e("div",Fe,[Be,e("span",qe,c(s(t).pan.pan_publoc_ref),1)]),e("div",Je,[Ze,e("span",Ge,c(s(t).pan.pan_ref),1)]),e("div",He,[Qe,e("span",We,c(s(t).pan.reg_label),1)])]),e("div",Ke,[e("div",Ye,[Xe,e("span",es,c(s(t).pan.category_label||"-"),1)]),e("div",ss,[ts,e("span",os,c(s(t).pan.format_label||"-"),1)])]),e("div",ls,[s(t).pan.pan_state==1?(o(),i("div",ns,is)):s(t).pan.pan_state==3?(o(),i("div",cs,[rs,e("div",ds,[e("div",ps,[_s,e("span",us,c(new Date(s(t).loc_infos.pan_loc_date_debut).toLocaleDateString()),1)]),e("div",fs,[ms,e("span",hs,c(s(t).loc_infos.pan_loc_month),1)]),e("div",bs,[xs,e("span",vs,c(s(t).loc_infos.date_fin.toLocaleDateString()),1)]),e("div",ys,[e("div",gs,[ks,e("span",ws,[J(c(s(t).pan.ann_label||"-")+" ",1),e("span",$s,c(s(t).pan.ann_is_agence_com?"( Agence de com. )":""),1)])]),s(t).pan.sous_ann_id?(o(),i("div",Cs,[Vs,e("div",Ss,[e("div",Rs,[Ds,e("span",Is,c(s(t).pan.sous_ann_label),1)]),e("div",As,[Ms,e("span",js,c(new Date(s(t).sous_loc_infos.saloc_date_debut).toLocaleDateString()),1)]),e("div",Ps,[Es,e("span",Ls,c(s(t).sous_loc_infos.saloc_month),1)]),e("div",zs,[Ns,e("span",Ts,c(s(t).sous_loc_infos.date_fin.toLocaleDateString()),1)])])])):R("",!0)])])])):s(t).pan.pan_state==4?(o(),i("div",Os,Fs)):R("",!0)]),e("div",Bs,[e("div",qs,[Js,Zs,p(k,{label:"Voir la carte",class:"p-button-sm p-1",icon:"pi pi-map-marker",text:"",onClick:x[1]||(x[1]=_=>C.value=!0)})]),e("div",Gs,[e("div",Hs,[Qs,e("span",Ws,c(s(t).pan.lieu_label),1)]),e("div",Ks,[Ys,e("span",Xs,c(s(t).pan.lieu_ville),1)]),e("div",et,[st,e("span",tt,c(s(t).pan.lieu_region||"-"),1)]),e("div",ot,[lt,e("span",nt,c(s(t).pan.lieu_quartier||"-"),1)])])]),e("div",at,[it,s(t).photo_dispo?(o(),i("div",ct,[(o(!0),i(j,null,P(s(t).photo_dispo,_=>(o(),U(w,{key:_.file_id,class:"mr-2 mb-2",alt:"Image",preview:""},{indicatoricon:h(()=>[rt]),image:h(()=>[e("img",{src:`/api/p/media/${_.name_min_file}`,alt:"image",width:"100"},null,8,dt)]),preview:h($=>[e("img",{src:`/api/p/media/${_.name_file}`,alt:"preview",style:E($.style),onClick:$.onClick},null,12,pt)]),_:2},1024))),128))])):(o(),i("div",_t,ft))]),e("div",mt,[ht,s(t).photo_pose?(o(),i("div",bt,[(o(!0),i(j,null,P(s(t).photo_pose,_=>(o(),U(w,{key:_.file_id,class:"mr-2 mb-2",alt:"Image",preview:""},{indicatoricon:h(()=>[xt]),image:h(()=>[e("img",{src:`/api/p/media/${_.name_min_file}`,alt:"image",width:"100"},null,8,vt)]),preview:h($=>[e("img",{src:`/api/p/media/${_.name_file}`,alt:"preview",style:E($.style),onClick:$.onClick},null,12,yt)]),_:2},1024))),128))])):(o(),i("div",gt,wt))]),e("div",$t,[Ct,s(t).photo_solarpro?(o(),i("div",Vt,[(o(!0),i(j,null,P(s(t).photo_solarpro,_=>(o(),U(w,{key:_.file_id,class:"mr-2 mb-2",alt:"Image",preview:""},{indicatoricon:h(()=>[St]),image:h(()=>[e("img",{src:`/api/p/media/${_.name_min_file}`,alt:"image",width:"100"},null,8,Rt)]),preview:h($=>[e("img",{src:`/api/p/media/${_.name_file}`,alt:"preview",style:E($.style),onClick:$.onClick},null,12,Dt)]),_:2},1024))),128))])):(o(),i("div",It,Mt))]),e("div",jt,[p(k,{onClick:z,label:"Actualiser",icon:"pi pi-refresh",class:"mr-5 p-1 p-button-sm p-button-help",outlined:""}),Pt,p(k,{onClick:g,label:"Modifier",icon:"pi pi-pencil",class:"mr-5 p-1 p-button-sm"}),p(k,{class:"p-1 p-button-sm",onClick:x[2]||(x[2]=_=>B(_)),severity:"danger",label:"Supprimer",icon:"pi pi-times",outlined:""})])])):R("",!0),s(C)?(o(),U(V,{key:1,onClose:x[3]||(x[3]=_=>C.value=!1),pan:s(t).pan},null,8,["pan"])):R("",!0)])}}},D=u=>(te("data-v-291fac7b"),u=u(),oe(),u),Lt={class:"h-full overflow-auto flex-grow flex flex-col"},zt=D(()=>e("span",{class:"flex-grow"},null,-1)),Nt={class:"flex items-end justify-center"},Tt={class:"border border-purple-500 rounded p-2 mr-5 min-w-[150px] text-center bg-white"},Ot={class:"border rounded p-2 mr-5 min-w-[150px] text-center bg-white"},Ut={class:"border rounded p-2 mr-5 w-[150px] text-center bg-white"},Ft={class:"flex flex-col"},Bt=D(()=>e("span",{class:"text-xs font-bold"}," Page ",-1)),qt={class:"flex flex-col text-sm"},Jt={class:""},Zt={class:""},Gt={class:"text-center border"},Ht=["onClick"],Qt={key:1,class:"flex flex-col"},Wt={key:0,class:"text-xs text-gray-500"},Kt=D(()=>e("strong",null," Sous-location ",-1)),Yt={key:2,class:""},Xt={class:"bg-gray-50 min-h-[50px] items-center flex border-t w-full sticky bottom-0 justify-center"},eo={class:"px-5"},so=D(()=>e("span",{class:"underline-text"}," SÃ©lections :",-1)),to={class:"underline-text-purple font-bold text-xl"},oo={class:"ml-2"},lo={class:"flex items-center p-2 bg-gray-50 sticky top-0 z-50"},no={key:0,class:"uppercase font-bold flex-grow text-center"},ao={class:"flex flex-col px-2"},io={class:"flex flex-col mb-2 border-b py-2"},co=D(()=>e("span",{class:"text-xs font-bold"}," Etat ",-1)),ro={class:"flex justify-end p-2 border-b mb-2"},po={class:"my-5 flex flex-col"},_o=D(()=>e("span",{class:"text-xs"}," Condition de recherche ",-1)),uo={class:"flex justify-end"},fo={class:"flex flex-col"},mo=D(()=>e("span",{class:"text-xs font-bold"}," Rechercher ",-1)),ho={class:"flex flex-col"},bo=D(()=>e("span",{class:"text-xs font-bold"}," Par ",-1)),xo={__name:"index",props:["heightHeader","prefix_api","heightContainer"],setup(u){const I=u,{setErrorServer:L,setNotifToast:A}=le(),b=n([]),d=n({limit:150,page:1,state:"all",condition:"and"}),F=n({1:"Dispo.",2:"En rÃ©servation",3:"En location",4:"Indispo."}),t=n(60),C=n([{label:"Ref. RÃ©gisseur",key:"pan_ref",w:50},{label:"Ref. Publoc",key:"pan_publoc_ref",w:50},{label:"RÃ©gisseur",key:"reg_label"},{label:"Annonceur",key:"ann_label"},{label:"Etat",key:"state"}]),B=n([{label:"ET",key:"and"},{label:"OU",key:"or"}]);n([]);const m=n({}),g=n(!1);q(m.value,a=>{const r=Object.keys(a),v=k(r,m.value);g.value=v>0});function z(){if(g.value)f();else for(let a=0;a<b.value.length;a++){const r=b.value[a];m.value[r.pan_id]=!0}}function f(){const a=Object.keys(m.value);for(let r=0;r<a.length;r++){const v=a[r];delete m.value[v]}}const x=X(()=>{const a=Object.keys(m.value);return k(a,m.value)});function k(a,r){return a.reduce((M,Z)=>r[Z]?M+1:M,0)}const w=n(!1),V=n(null),_=n(),$=n([{label:"Options",items:[{label:"Refresh",icon:"pi pi-refresh"},{label:"Export",icon:"pi pi-upload"}]}]),ne=a=>{_.value.toggle(a)},ae=n([{label:"Ref. RÃ©gisseur",key:"pan_ref"},{label:"Ref. Publoc",key:"pan_publoc_ref"},{label:"RÃ©gisseur",key:"reg"},{label:"Annonceur",key:"ann"},{label:"Sous Annonceur",key:"sous_ann"},{label:"Ville",key:"ville"},{label:"Quartier",key:"quartier"},{label:"Lieu dit",key:"lieu_label"}]),ie=n([{label:"Tous",key:"all"},{label:"Dispo",key:"1"},{label:"En rÃ©servation",key:"2"},{label:"En Location",key:"3"},{label:"Indisponible",key:"4"}]),S=n([{search:"",search_by:"pan_ref",id:1}]),K=n(300),N=n(!0);n("pan_publoc_ref"),q(N,a=>{K.value=a?300:50}),q(S.value,a=>{d.value.page=1,O()}),q(()=>d.value.condition,()=>{O()}),q(()=>d.value.state,()=>{d.value.page=1,O()});const H=n(!1),Y=n(0),T=n(0),ce=X(()=>{const a=Math.ceil(T.value/d.value.limit);return T.value>0?Array.from({length:a},(r,v)=>v+1):[1]});function re(){const a=S.value[S.value.length-1];S.value.push({search:"",search_by:"pan_ref",id:a.id+1})}function de(a){S.value.splice(a,1)}async function O(){H.value=!0,f();try{const a=await $fetch(`${I.prefix_api}/a/ad/panels`,{method:"get",query:{filters:d.value,search_filters:S.value}});a.status?(b.value=a.panels,Y.value=a.nb_total_panel,T.value=a.nb_total_resultat):A({severity:"error",detail:a.message,summary:"rÃ©cupÃ©ration des Liste des panneaux"})}catch(a){console.error(a),L()}H.value=!1}return se(()=>{O()}),(a,r)=>{const v=W,M=fe,Z=me,pe=he,_e=be,ue=Et;return o(),i("div",{class:"flex h-full overflow-auto",style:E({height:`${I.heightContainer}px`})},[e("div",Lt,[e("div",{class:"border-b sticky flex items-center top-0 bg-gray-50 px-2 z-50",style:E({minHeight:`${s(t)}px`})},[p(v,{loading:s(H),icon:"pi pi-refresh ",onClick:O,class:"p-button-sm p-1 p-button-text p-button-help",label:"Actualiser"},null,8,["loading"]),zt,e("div",Nt,[e("div",Tt,[J(" Total RÃ©sultat : "),e("strong",null,c(s(T)),1)]),e("div",Ot,[J(" Total Panneau : "),e("strong",null,c(s(Y)),1)]),e("div",Ut,[e("strong",null,c((s(d).page-1)*s(d).limit+1),1),J(" Ã  "),e("strong",null,c(s(d).page*s(d).limit>s(T)?s(T):s(d).page*s(d).limit),1)]),e("div",Ft,[Bt,p(M,{class:"p-0 p-inputtext-sm text-xs",options:s(ce),modelValue:s(d).page,"onUpdate:modelValue":r[0]||(r[0]=l=>s(d).page=l)},null,8,["options","modelValue"])])])],4),e("div",qt,[e("table",Jt,[e("thead",Zt,[e("tr",{class:"bg-gray-50 sticky z-50",style:E({top:`${s(t)}px`})},[e("th",null,[p(Z,{binary:!0,modelValue:s(g),"onUpdate:modelValue":r[1]||(r[1]=l=>Ie(g)?g.value=l:null),onClick:z},null,8,["modelValue"])]),(o(!0),i(j,null,P(s(C),l=>(o(),i("th",{class:"border-x uppercase text-left px-2",style:{},key:l.key},c(l.label),1))),128))],4)]),e("tbody",null,[(o(!0),i(j,null,P(s(b),l=>(o(),i("tr",{class:Q([{"bg-green-200/20":s(m)[l.pan_id]&&l.pan_id!=s(V),"bg-purple-300/30":s(V)==l.pan_id},""]),key:l.pan_id},[e("td",Gt,[p(Z,{modelValue:s(m)[l.pan_id],"onUpdate:modelValue":y=>s(m)[l.pan_id]=y,binary:!0},null,8,["modelValue","onUpdate:modelValue"])]),(o(!0),i(j,null,P(s(C),y=>(o(),i("td",{class:Q([{"underline cursor-pointer":y.key=="pan_ref"},"border p-2"]),onClick:()=>{y.key=="pan_ref"&&(w.value=!0,V.value=l.pan_id)},key:y.key},[y.key=="state"?(o(),i("span",{key:0,class:Q(["border p-1 text-xs",{"bg-blue-500/20":l.pan_state==1||l.pan_state==2,"bg-red-500/20":l.pan_state==3,"bg-gray-500/20":l.pan_state==4}])},c(s(F)[l.pan_state]),3)):y.key=="ann_label"?(o(),i("span",Qt,[e("span",null,c(l[y.key]),1),l.sous_ann_id?(o(),i("span",Wt,[Kt,J(" : "+c(l.sous_ann_label),1)])):R("",!0)])):(o(),i("span",Yt,c(l[y.key]||"-"),1))],10,Ht))),128))],2))),128))])])]),e("div",Xt,[e("div",eo,[so,e("span",to,c(s(x)),1)]),e("div",oo,[p(v,{icon:"pi pi-ellipsis-v",class:"h-[32px] w-[32px]",onClick:ne}),p(pe,{ref_key:"menu_selection",ref:_,id:"overlay_menu",model:s($),popup:!0},null,8,["model"])])])]),e("div",{class:"h-full border-l transition-all bg-gray-50 flex flex-col overflow-auto",style:E({width:`${s(K)}px`})},[e("div",lo,[p(v,{icon:s(N)?"pi pi-times":"pi pi-sliders-h",text:"",onClick:r[2]||(r[2]=()=>{N.value=!s(N)}),class:"p-0 text-sm h-[30px] w-[30px]"},null,8,["icon"]),s(N)?(o(),i("span",no," Filtres ")):R("",!0)]),Ae(e("div",ao,[e("div",io,[co,p(M,{modelValue:s(d).state,"onUpdate:modelValue":r[3]||(r[3]=l=>s(d).state=l),options:s(ie),"option-label":"label","option-value":"key",class:"dropdown-sm p-inputtext-sm"},null,8,["modelValue","options"])]),e("div",ro,[p(v,{icon:"pi pi-plus p-button-sm",label:"Ajouter un filtre",onClick:re,class:"p-0",text:""})]),e("div",po,[_o,p(M,{modelValue:s(d).condition,"onUpdate:modelValue":r[4]||(r[4]=l=>s(d).condition=l),options:s(B),"option-label":"label","option-value":"key",class:"dropdown-sm p-inputtext-sm"},null,8,["modelValue","options"])]),(o(!0),i(j,null,P(s(S),(l,y)=>(o(),i("div",{class:"flex flex-col border p-2 rounded mb-2",key:l.id},[e("div",uo,[p(v,{onClick:G=>de(y),disabled:s(S).length==1,text:"",icon:"pi pi-times",class:"p-button-sm p-0 h-[20px] w-[20px] p-button-help"},null,8,["onClick","disabled"])]),e("div",fo,[mo,p(_e,{placeholder:"Recherche",class:"p-inputtext-sm p-1 mb-2",modelValue:l.search,"onUpdate:modelValue":G=>l.search=G},null,8,["modelValue","onUpdate:modelValue"])]),e("div",ho,[bo,p(M,{modelValue:l.search_by,"onUpdate:modelValue":G=>l.search_by=G,options:s(ae),class:"dropdown-sm p-inputtext-sm","option-label":"label","option-value":"key"},null,8,["modelValue","onUpdate:modelValue","options"])])]))),128))],512),[[Me,s(N)]])],4),s(w)?(o(),U(ue,{key:0,onRefresh:r[5]||(r[5]=()=>{w.value=!1,O()}),prefix_api:I.prefix_api,onClose:r[6]||(r[6]=l=>w.value=!1),pan_id:s(V)},null,8,["prefix_api","pan_id"])):R("",!0)],4)}}},Oo=ee(xo,[["__scopeId","data-v-291fac7b"]]);export{Oo as default};
